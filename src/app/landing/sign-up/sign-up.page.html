<ion-content class="container-page">
  <div class="custom-background ">
    <div class="custom-background-dark">
      <div class="fields-container">

        <h4>Reg√≠strate</h4>

        <div class="register-container">
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="container-inputs">
              <!-- NOMBRE -->
              <div class="input-container">
                <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('nombre')">
                  <ion-input type="text" placeholder="Escribe tus nombres" formControlName="nombre"
                    (ionBlur)="validateField('nombre')"></ion-input>
                </ion-item>
                <div class="error-message" *ngIf="isFieldInvalid('nombre')">
                  El nombre es obligatorio.
                </div>
              </div>

              <!-- APELLIDOS -->
              <div class="input-container">
                <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('apellidos')">
                  <ion-input type="text" placeholder="Escribe tus apellidos" formControlName="apellidos"
                    (ionBlur)="validateField('apellidos')"></ion-input>
                </ion-item>
                <div class="error-message" *ngIf="isFieldInvalid('apellidos')">
                  Los apellidos son obligatorios.
                </div>
              </div>

              <!-- EMAIL -->
              <div class="input-container">
                <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('email')">
                  <ion-icon name="mail-outline" slot="start"></ion-icon>
                  <ion-input type="email" placeholder="Escribe tu correo" formControlName="email"
                    (ionBlur)="validateField('email')"></ion-input>
                </ion-item>
                <div class="error-message" *ngIf="isFieldInvalid('email')">
                  Ingresa un correo v√°lido.
                </div>
              </div>

              <!-- TEL√âFONO -->
              <div class="input-container">
                <ion-item class="custom-input phone-input" lines="none" [class.invalid]="isFieldInvalid('telefono')">
                  <div class="phone-prefix" slot="start">
                    <span class="flag">üá®üá¥</span>
                    <span class="code">+57</span>
                  </div>
                  <ion-input type="tel" placeholder="Escribe tu n√∫mero de celular" formControlName="telefono"
                    maxlength="10" (ionBlur)="validateField('telefono')"></ion-input>
                </ion-item>
                <div class="error-message" *ngIf="isFieldInvalid('telefono')">
                  Ingresa un n√∫mero de tel√©fono v√°lido (10 d√≠gitos).
                </div>
              </div>

              <!-- FECHA DE NACIMIENTO -->
              <div class="input-container">
                <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('fechaNacimiento')">
                  <ion-icon name="calendar-outline" slot="start"></ion-icon>
                  <ion-input type="date" formControlName="fechaNacimiento"
                    (ionChange)="validateField('fechaNacimiento')">
                  </ion-input>
                </ion-item>
                <div class="error-message" *ngIf="isFieldInvalid('fechaNacimiento')">
                  La fecha de nacimiento es obligatoria.
                </div>
              </div>
            </div>

            <!-- NOTA -->
            <div class="info-box">
              <p>
                La contrase√±a debe tener m√≠nimo 8 caracteres, al menos una may√∫scula, min√∫scula, n√∫mero y s√≠mbolo (# $ *).
              </p>
            </div>

            <!-- CONTRASE√ëA -->
            <div class="input-container">
              <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('password')">
                <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
                <ion-input [type]="showPassword ? 'text' : 'password'" placeholder="Escribe tu contrase√±a"
                  formControlName="password" (ionBlur)="validateField('password')"></ion-input>
                <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'" slot="end" class="toggle-password"
                  (click)="togglePassword()"></ion-icon>
              </ion-item>
              <div class="error-message" *ngIf="isFieldInvalid('password')">
                La contrase√±a no cumple los requisitos.
              </div>
            </div>

            <!-- CONFIRMAR CONTRASE√ëA -->
            <div class="input-container">
              <ion-item class="custom-input" lines="none" [class.invalid]="isFieldInvalid('confirmPassword')">
                <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
                <ion-input [type]="showConfirmPassword ? 'text' : 'password'" placeholder="Confirma tu contrase√±a"
                  formControlName="confirmPassword" (ionBlur)="validateField('confirmPassword')"></ion-input>
                <ion-icon [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'" slot="end"
                  class="toggle-password" (click)="toggleConfirmPassword()"></ion-icon>
              </ion-item>
              <div class="error-message" *ngIf="isFieldInvalid('confirmPassword')">
                Las contrase√±as no coinciden.
              </div>
            </div>

            <!-- CHECKBOX T√âRMINOS -->
            <div class="checkbox-container">
              <ion-checkbox formControlName="aceptaTerminos"></ion-checkbox>
              <span class="checkbox-label">Acepto los t√©rminos y condiciones</span>
            </div>

            <!-- CHECKBOX POL√çTICA -->
            <div class="checkbox-container">
              <ion-checkbox formControlName="aceptaPolitica"></ion-checkbox>
              <span class="checkbox-label">Acepto la pol√≠tica de privacidad</span>
            </div>

            <div class="button-container">
              <ion-button class="register-button" expand="block" type="submit" [disabled]="registerForm.invalid">
                Registrarme
              </ion-button>
            </div>

            <div class="back-link">
              <a href="#">Volver</a>
            </div>
          </form>
        </div>

      </div>

    </div>
  </div>
</ion-content>